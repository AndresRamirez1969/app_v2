import{_ as I,J as n,ak as k,B as C,ba as S,s as b,d as t,a as r,w as i,l as T,C as d,aj as B,a2 as E,U as F,f as g,e as c,t as N,a0 as q,al as L,ab as P,o as _,L as R}from"./index-DA8Oyi7H.js";import{J as U,j as h}from"./mdi-CCqP_oQm.js";import{_ as j}from"./tasker-logo-BjoI8oNu.js";const J={class:"forgot-password-page"},O={class:"card-wrapper"},$={class:"text-center mb-6"},A=["src"],D={key:0,class:"text-center mb-4",style:{color:"#1976d2"}},M={__name:"ForgotPass",setup(z){const l=n(""),u=n(!1),m=n(null),v=k(),x=q(),p={required:o=>!!o||"Este campo es obligatorio.",email:o=>/.+@.+\..+/.test(o)||"Ingresa un correo válido."},a=n(0);let s=null;const y=C(()=>`00:${a.value.toString().padStart(2,"0")}`),V=()=>{a.value=60,s=setInterval(()=>{a.value>0?a.value--:(clearInterval(s),s=null)},1e3)};S(()=>{s&&clearInterval(s)});const w=async()=>{if(m.value.validate()){u.value=!0;try{await R.post("/forgot-password",{email:l.value}),v.success("Se ha enviado un correo para reestablecer tu contraseña."),l.value="",V()}catch{v.error("Este correo aún no está registrado.")}finally{u.value=!1}}};return(o,e)=>(_(),b("div",J,[t("div",O,[r(P,{class:"pa-10 login-card",elevation:"6","max-width":"420"},{default:i(()=>[t("div",$,[t("img",{src:d(j),alt:"Tasker Logo",class:"logo-large mb-4"},null,8,A)]),e[5]||(e[5]=t("h2",{class:"text-center text-h5 font-weight-bold mb-4"},"¿Olvidaste tu contraseña?",-1)),e[6]||(e[6]=t("p",{class:"text-center text-body-2 mb-8"},"Ingresa tu correo y te enviaremos un enlace para restablecer tu contraseña.",-1)),r(B,{onSubmit:E(w,["prevent"]),ref_key:"formRef",ref:m,class:"mb-6"},{default:i(()=>[r(F,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=f=>l.value=f),"prepend-inner-icon":d(U),label:"Correo electrónico",type:"email",variant:"outlined",rules:[p.required,p.email],required:"",disabled:a.value>0},null,8,["modelValue","prepend-inner-icon","rules","disabled"]),r(g,{loading:u.value,type:"submit",block:"",color:"primary",class:"mt-4",disabled:a.value>0},{default:i(()=>e[2]||(e[2]=[c(" Enviar Correo ")])),_:1},8,["loading","disabled"])]),_:1},512),a.value>0?(_(),b("div",D,[e[3]||(e[3]=c(" Puedes volver a enviar el correo en: ")),t("b",null,N(y.value),1)])):T("",!0),r(g,{class:"mt-6",variant:"text",color:"secondary",block:"",onClick:e[1]||(e[1]=f=>d(x).push("/login"))},{default:i(()=>[r(L,{icon:d(h),start:""},null,8,["icon"]),e[4]||(e[4]=c(" Volver a Iniciar Sesión "))]),_:1})]),_:1})])]))}},Q=I(M,[["__scopeId","data-v-dc670921"]]);export{Q as default};
