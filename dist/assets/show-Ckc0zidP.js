import{_ as Ht,ar as Zt,J as G,A as qt,B as b,an as Jt,aC as Qt,Z as Kt,am as I,c as u,s as a,w as s,a as n,l as r,b as x,f as E,aj as m,C as p,t as d,Q as L,G as j,p as g,m as k,e as h,u as w,H as z,x as F,V as $,E as Wt,d as t,ad as Xt,ao as D,a9 as Yt,v as J,a6 as te,aB as ee,q as le,o,ak as ct,L as R,a0 as Q}from"./index-BtdFDd_C.js";import{j as se,k as M,l as O,p as P,f as oe,e as Z,b as K}from"./mdi-CCqP_oQm.js";import{_ as q}from"./StatusChip-DyVs1_p3.js";import{f as W}from"./countries-Ba2Yp21G.js";const ne={key:1,class:"font-weight-medium ml-3 mb-0 d-none d-md-block"},ie={key:2,class:"font-weight-medium ml-3 mb-0 d-block d-md-none"},ae={key:1,class:"d-flex align-center justify-center",style:{width:"200px",height:"200px","background-color":"#f5f5f5","border-radius":"12px"}},ue={key:0},de={key:1},re={key:0},ce={key:1},pe={key:0},ve={key:1},fe={key:0},ye={key:1},he={key:0},be={key:1},me={key:0},_e={key:1},ge={key:0},ke={style:{"margin-left":"6px"}},we={style:{"margin-left":"6px"}},xe={key:1},Ce={key:0},Ne={key:1},ze={key:0},$e={key:1},Ae={key:0},Be={key:1},Se={key:0},Ue={style:{"margin-left":"6px"}},Ve={style:{"margin-left":"6px"}},Ee={key:1},De=["onClick"],Te={class:"folio-cell"},Ge={key:1},Ie={class:"logo-cell"},Le=["src"],je={key:1,style:{"font-size":"12px",color:"#888"}},Fe={class:"legal-cell"},Re={class:"address-cell"},Me={class:"status-cell"},Oe={key:1},Pe={class:"actions-cell"},He={key:0},Ze=["onClick"],qe={class:"folio-cell"},Je={key:1},Qe={class:"logo-cell"},Ke=["src"],We={key:1,style:{"font-size":"12px",color:"#888"}},Xe={class:"legal-cell"},Ye={class:"address-cell"},tl={class:"status-cell"},el={key:1},ll={class:"actions-cell"},sl={key:0},ol=["onClick"],nl={key:1},il={key:1},al={class:"actions-cell"},ul={key:0},dl=["onClick"],rl={key:1},cl={style:{"text-align":"center","vertical-align":"middle"}},pl={style:{display:"flex","align-items":"center","justify-content":"left"}},vl=["src"],fl={key:1,style:{"font-size":"12px",color:"#888"}},yl={key:1},hl={class:"actions-cell"},bl={key:0},ml={key:1},_l={__name:"show",setup(gl){const C=Kt(),zt=Qt(),{mdAndDown:X}=Zt(),f=G(null),$t=qt(),Y=G([]),tt=G([]),et=G([]),lt=G([]),y=G({first_name:"",last_name:"",email:"",phone_country:"",phone_number:""}),st=b(()=>$t.user||{roles:[],permissions:[],organization_id:null}),ot=b(()=>st.value.roles||[]),N=b(()=>st.value.permissions||[]),pt=b(()=>st.value.organization_id),A=b(()=>ot.value.includes("superadmin")),nt=b(()=>ot.value.includes("admin")),vt=b(()=>N.value.includes("organization.view")),At=b(()=>N.value.includes("organization.update")),Bt=b(()=>A.value||nt.value||ot.value.includes("sponsor")||vt.value),St=b(()=>A.value||nt.value||At.value),_=b(()=>A.value),it=b(()=>N.value.includes("business.update")),B=b(()=>N.value.includes("business.view")),Ut=b(()=>B.value||it.value||_.value),at=b(()=>N.value.includes("businessUnit.update")),T=b(()=>N.value.includes("businessUnit.view")),Vt=b(()=>T.value||at.value||_.value),ut=b(()=>N.value.includes("businessUnitGroup.update")),S=b(()=>N.value.includes("businessUnitGroup.view")),Et=b(()=>S.value||ut.value||_.value),dt=b(()=>N.value.includes("user.update")),U=b(()=>N.value.includes("user.view")),Dt=b(()=>U.value||dt.value||_.value),V=b(()=>(A.value||nt.value)&&!X.value),H=b(()=>{var i;return((i=f.value)==null?void 0:i.status)==="active"}),ft=()=>{var i;(i=f.value)!=null&&i.id&&C.push({path:`/organizaciones/editar/${f.value.id}`})},Tt=()=>{C.push("/organizaciones")},Gt=i=>C.push({path:`/empresas/editar/${i.id}`}),yt=i=>C.push({path:`/empresas/${i.id}`}),It=i=>C.push({path:`/ubicaciones/editar/${i.id}`}),ht=i=>C.push({path:`/ubicaciones/${i.id}`}),Lt=i=>C.push({path:`/grupos-ubicaciones/editar/${i.id}`}),bt=i=>C.push({path:`/grupos-ubicaciones/${i.id}`}),jt=i=>C.push({path:`/usuarios/editar/${i.id}`}),mt=i=>C.push({path:`/usuarios/${i.id}`}),_t=async()=>{var e;if(!f.value)return;const i=H.value?"inactive":"active";try{const c=await I.put(`/organizations/${f.value.id}`,{status:i});f.value.status=c.data.status||i}catch(c){alert("No se pudo cambiar el estatus"),console.error("Detalle del error:",((e=c==null?void 0:c.response)==null?void 0:e.data)||c)}},Ft=async i=>{if(!_.value)return;const c=i.status==="active"?"inactive":"active";try{const l=await I.put(`/businesses/${i.id}`,{status:c});i.status=l.data.status||c}catch{alert("No se pudo cambiar el estatus")}},Rt=async i=>{if(!_.value)return;const c=i.status==="active"?"inactive":"active";try{const l=await I.put(`/business-units/${i.id}`,{status:c});i.status=l.data.status||c}catch{alert("No se pudo cambiar el estatus")}},Mt=async i=>{if(!_.value)return;const c=i.status==="active"?"inactive":"active";try{const l=await I.put(`/business-unit-groups/${i.id}`,{status:c});i.status=l.data.status||c}catch{alert("No se pudo cambiar el estatus del grupo")}},Ot=async i=>{if(!_.value)return;const c=i.status==="active"?"inactive":"active";try{const l=await I.put(`/users/${i.id}`,{status:c});i.status=l.data.status||c}catch{alert("No se pudo cambiar el estatus del usuario")}},rt=i=>{if(!i)return"No disponible";const e=[i.street,i.outdoor_number,i.indoor_number,i.neighborhood,i.city,i.postal_code,i.state,i.country].filter(Boolean);return e.length?e.join(", "):"No disponible"},gt=(i,e=60)=>i?i.length>e?i.slice(0,e)+"...":i:"",Pt=i=>{var e;return i.business_units_count??((e=i.businessUnits)==null?void 0:e.length)??0};return Jt(async()=>{try{const i=zt.params.id;if(!A.value&&(!vt.value||pt.value&&String(pt.value)!==String(i))){C.replace("/403");return}const e=await I.get(`/organizations/${i}`),c=e.data.organization||e.data.data||e.data;f.value=c,Y.value=c.businesses||[],tt.value=c.business_units||[],et.value=c.business_unit_groups||[],lt.value=c.users||[],c.contact?y.value={first_name:c.contact.first_name||"",last_name:c.contact.last_name||"",email:c.contact.email||"",phone_country:c.contact.phone_country||"",phone_number:c.contact.phone_number||""}:y.value={first_name:"",last_name:"",email:"",phone_country:"",phone_number:""}}catch(i){console.error("Error al obtener la organización:",i)}}),(i,e)=>{const c=le("router-link");return Bt.value?(o(),u(te,{key:0,fluid:""},{default:s(()=>[n($,{class:"align-center mb-6","no-gutters":""},{default:s(()=>[n(x,{cols:"auto",class:"d-flex align-center"},{default:s(()=>[A.value?(o(),u(E,{key:0,icon:"",variant:"text",class:"px-3 py-2",style:{"border-radius":"8px",border:"1px solid #ccc","min-width":"44px",height:"44px"},onClick:Tt},{default:s(()=>[n(m,{icon:p(se)},null,8,["icon"])]),_:1})):r("",!0),f.value?(o(),a("h3",ne,d(f.value.folio?`${f.value.folio}`:"")+" "+d(f.value.legal_name?`- ${f.value.legal_name}`:"- Organización"),1)):r("",!0),f.value?(o(),a("h3",ie,d(f.value.folio?`${f.value.folio}`:""),1)):r("",!0)]),_:1}),n(x,{class:"d-flex justify-end align-center"},{default:s(()=>[St.value?(o(),a(w,{key:0},[p(X)?(o(),u(L,{key:1,location:"bottom end"},{activator:s(({props:l})=>[n(E,F(l,{icon:"",variant:"text",class:"pa-0","min-width":"0",height:"44",style:{"border-radius":"8px",border:"1px solid #ccc","min-width":"44px"}}),{default:s(()=>[n(m,{icon:p(Z),size:"24"},null,8,["icon"])]),_:2},1040)]),default:s(()=>[n(j,{class:"custom-dropdown elevation-1 rounded-lg",style:{"min-width":"180px"}},{default:s(()=>[n(g,{onClick:ft},{prepend:s(()=>[n(m,{icon:p(M),size:"16"},null,8,["icon"])]),default:s(()=>[n(k,null,{default:s(()=>e[6]||(e[6]=[h("Editar")])),_:1})]),_:1}),_.value?(o(),a(w,{key:0},[n(z,{class:"my-1"}),n(g,{onClick:_t},{prepend:s(()=>[n(m,{icon:H.value?p(O):p(P),size:"16"},null,8,["icon"])]),default:s(()=>[n(k,null,{default:s(()=>[h(d(H.value?"Desactivar":"Activar"),1)]),_:1})]),_:1})],64)):r("",!0)]),_:1})]),_:1})):(o(),u(L,{key:0,location:"bottom end"},{activator:s(({props:l})=>[n(E,F(l,{variant:"text",class:"px-3 py-2",style:{"border-radius":"8px",border:"1px solid #ccc","min-width":"44px",height:"44px"}}),{default:s(()=>[e[4]||(e[4]=h(" Opciones ")),n(m,{icon:p(oe),end:"",size:"18"},null,8,["icon"])]),_:2},1040)]),default:s(()=>[n(j,{class:"custom-dropdown elevation-1 rounded-lg",style:{"min-width":"200px"}},{default:s(()=>[n(g,{onClick:ft},{prepend:s(()=>[n(m,{icon:p(M),size:"16"},null,8,["icon"])]),default:s(()=>[n(k,null,{default:s(()=>e[5]||(e[5]=[h("Editar")])),_:1})]),_:1}),_.value?(o(),a(w,{key:0},[n(z,{class:"my-1"}),n(g,{onClick:_t},{prepend:s(()=>[n(m,{icon:H.value?p(O):p(P),size:"16"},null,8,["icon"])]),default:s(()=>[n(k,null,{default:s(()=>[h(d(H.value?"Desactivar":"Activar"),1)]),_:1})]),_:1})],64)):r("",!0)]),_:1})]),_:1}))],64)):r("",!0)]),_:1})]),_:1}),n($,null,{default:s(()=>[n(x,{cols:"12",md:"4",class:"d-flex justify-center align-center"},{default:s(()=>{var l;return[(l=f.value)!=null&&l.logo?(o(),u(Wt,{key:0,src:f.value.logo,"max-width":"320","max-height":"320",class:"rounded-lg",alt:"Logo",style:{background:"none"}},null,8,["src"])):(o(),a("div",ae,e[7]||(e[7]=[t("span",{class:"text-medium-emphasis"},"Sin logo",-1)])))]}),_:1}),n(x,{cols:"12",md:"8"},{default:s(()=>[n(Xt,{class:"font-weight-bold text-h6",style:{"padding-left":"0.5rem"}},{default:s(()=>e[8]||(e[8]=[h("Información general")])),_:1}),n(D,{class:"rounded-lg elevation-1"},{default:s(()=>{var l,v,kt,wt,xt,Ct,Nt;return[t("tbody",null,[A.value?(o(),a(w,{key:0},[t("tr",null,[e[9]||(e[9]=t("td",{class:"font-weight-bold text-subtitle-1"},"Estado",-1)),t("td",null,[(l=f.value)!=null&&l.status?(o(),u(q,{key:0,status:f.value.status},null,8,["status"])):(o(),a(w,{key:1},[h(" No disponible ")],64))])]),t("tr",null,[e[10]||(e[10]=t("td",{class:"font-weight-bold text-subtitle-1"},"Folio",-1)),t("td",null,[(v=f.value)!=null&&v.folio?(o(),a("span",ue,d(f.value.folio),1)):(o(),a("span",de,"No disponible"))])])],64)):r("",!0),t("tr",null,[e[11]||(e[11]=t("td",{class:"font-weight-bold text-subtitle-1"},"Nombre legal",-1)),t("td",null,d(((kt=f.value)==null?void 0:kt.legal_name)||"No disponible"),1)]),t("tr",null,[e[12]||(e[12]=t("td",{class:"font-weight-bold text-subtitle-1"},"Alias",-1)),t("td",null,d(((wt=f.value)==null?void 0:wt.alias)||"No disponible"),1)]),t("tr",null,[e[13]||(e[13]=t("td",{class:"font-weight-bold text-subtitle-1"},"Descripción",-1)),t("td",null,d(((xt=f.value)==null?void 0:xt.description)||"No disponible"),1)]),t("tr",null,[e[14]||(e[14]=t("td",{class:"font-weight-bold text-subtitle-1"},"Zona horaria",-1)),t("td",null,[(Ct=f.value)!=null&&Ct.timezone?(o(),a("span",re,d(f.value.timezone),1)):(o(),a("span",ce,"No disponible"))])]),t("tr",null,[e[15]||(e[15]=t("td",{class:"font-weight-bold text-subtitle-1"},"Dirección",-1)),t("td",null,[(Nt=f.value)!=null&&Nt.address?(o(),a("span",pe,d(rt(f.value.address)),1)):(o(),a("span",ve,"No disponible"))])])])]}),_:1})]),_:1})]),_:1}),n($,null,{default:s(()=>[n(x,{cols:"12"},{default:s(()=>[e[24]||(e[24]=t("div",{class:"font-weight-bold text-h6 mb-2",style:{"padding-left":"0.5rem"}},"Contacto",-1)),p(X)?(o(),u(Yt,{key:0,class:"rounded-lg elevation-1 pa-0"},{default:s(()=>[n(D,{class:"rounded-lg elevation-0",style:{border:"none"}},{default:s(()=>{var l,v;return[t("tbody",null,[t("tr",null,[e[16]||(e[16]=t("td",{class:"font-weight-bold text-subtitle-1",style:{width:"40%"}},"Nombre",-1)),t("td",null,[y.value.first_name?(o(),a("span",fe,d(y.value.first_name),1)):(o(),a("span",ye,"No disponible"))])]),t("tr",null,[e[17]||(e[17]=t("td",{class:"font-weight-bold text-subtitle-1",style:{width:"40%"}},"Apellido",-1)),t("td",null,[y.value.last_name?(o(),a("span",he,d(y.value.last_name),1)):(o(),a("span",be,"No disponible"))])]),t("tr",null,[e[18]||(e[18]=t("td",{class:"font-weight-bold text-subtitle-1"},"Correo",-1)),t("td",null,[y.value.email?(o(),a("span",me,d(y.value.email),1)):(o(),a("span",_e,"No disponible"))])]),t("tr",null,[e[19]||(e[19]=t("td",{class:"font-weight-bold text-subtitle-1"},"Teléfono",-1)),t("td",null,[y.value.phone_number?(o(),a("span",ge,[y.value.phone_country?(o(),a(w,{key:0},[t("span",null,d(((l=p(W)(y.value.phone_country))==null?void 0:l.flag)||""),1),t("span",ke,d(((v=p(W)(y.value.phone_country))==null?void 0:v.dial_code)||""),1),t("span",we,d(y.value.phone_number),1)],64)):(o(),a(w,{key:1},[h(d(y.value.phone_number),1)],64))])):(o(),a("span",xe,"No disponible"))])])])]}),_:1})]),_:1})):(o(),u(D,{key:1,class:"rounded-lg elevation-1"},{default:s(()=>{var l,v;return[e[23]||(e[23]=t("thead",null,[t("tr",null,[t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"10%"}},"Nombre"),t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"10%"}},"Apellido"),t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"20%"}},"Correo"),t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"25%"}},"Teléfono"),t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"15%"}}),t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"10%"}}),t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"10%"}})])],-1)),t("tbody",null,[t("tr",null,[t("td",null,[y.value.first_name?(o(),a("span",Ce,d(y.value.first_name),1)):(o(),a("span",Ne,"No disponible"))]),t("td",null,[y.value.last_name?(o(),a("span",ze,d(y.value.last_name),1)):(o(),a("span",$e,"No disponible"))]),t("td",null,[y.value.email?(o(),a("span",Ae,d(y.value.email),1)):(o(),a("span",Be,"No disponible"))]),t("td",null,[y.value.phone_number?(o(),a("span",Se,[y.value.phone_country?(o(),a(w,{key:0},[t("span",null,d(((l=p(W)(y.value.phone_country))==null?void 0:l.flag)||""),1),t("span",Ue,d(((v=p(W)(y.value.phone_country))==null?void 0:v.dial_code)||""),1),t("span",Ve,d(y.value.phone_number),1)],64)):(o(),a(w,{key:1},[h(d(y.value.phone_number),1)],64))])):(o(),a("span",Ee,"No disponible"))]),e[20]||(e[20]=t("td",null,null,-1)),e[21]||(e[21]=t("td",null,null,-1)),e[22]||(e[22]=t("td",null,null,-1))])])]}),_:1}))]),_:1})]),_:1}),V.value?(o(),u($,{key:0},{default:s(()=>[n(x,{cols:"12"},{default:s(()=>[e[30]||(e[30]=t("div",{class:"font-weight-bold text-h6 mb-2",style:{"padding-left":"0.5rem"}},"Empresas",-1)),n(D,{class:"rounded-lg elevation-1 fixed-table"},{default:s(()=>[e[29]||(e[29]=t("thead",null,[t("tr",null,[t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"10%"}},"Folio"),t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"10%"}},"Logo"),t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"20%"}},"Nombre"),t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"25%"}},"Dirección"),t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"15%"}}),t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"10%"}},"Estatus"),t("th",{class:"font-weight-bold text-subtitle-1 actions-header",style:{width:"10%"}})])],-1)),t("tbody",null,[(o(!0),a(w,null,J(Y.value,l=>(o(),a("tr",{key:l.id,class:R(["row-clickable",{"cursor-pointer":B.value}]),onClick:v=>B.value?yt(l):void 0,style:ct({cursor:B.value?"pointer":"default"})},[t("td",Te,[B.value?(o(),u(c,{key:0,to:`/empresas/${l.id}`,style:{"text-decoration":"underline",color:"#1976d2 !important"},onClick:e[0]||(e[0]=Q(()=>{},["stop"]))},{default:s(()=>[h(d(l.folio||"No disponible"),1)]),_:2},1032,["to"])):(o(),a("span",Ge,d(l.folio||"No disponible"),1))]),t("td",Ie,[t("div",{class:R(["logo-avatar",l.logo?"logo-avatar-transparent":""])},[l.logo?(o(),a("img",{key:0,src:l.logo,alt:"Logo"},null,8,Le)):(o(),a("span",je,"Sin logo"))],2)]),t("td",Fe,d(l.name||"No disponible"),1),t("td",Re,d(l.address?gt(rt(l.address),60):"No disponible"),1),e[27]||(e[27]=t("td",null,null,-1)),t("td",Me,[l.status?(o(),u(q,{key:0,status:l.status},null,8,["status"])):(o(),a("span",Oe,"No disponible"))]),t("td",Pe,[Ut.value?(o(),u(L,{key:0,location:"bottom end"},{activator:s(({props:v})=>[n(E,F({ref_for:!0},v,{variant:"text",class:"pa-0","min-width":"0",height:"24"}),{default:s(()=>[n(m,{icon:p(Z),size:"20"},null,8,["icon"])]),_:2},1040)]),default:s(()=>[n(j,{class:"custom-dropdown elevation-1 rounded-lg",style:{"min-width":"200px"}},{default:s(()=>[B.value?(o(),u(g,{key:0,onClick:v=>yt(l)},{prepend:s(()=>[n(m,{icon:p(K),size:"18"},null,8,["icon"])]),default:s(()=>[n(k,null,{default:s(()=>e[25]||(e[25]=[h("Ver")])),_:1})]),_:2},1032,["onClick"])):r("",!0),it.value&&B.value?(o(),u(z,{key:1,class:"my-1"})):r("",!0),it.value?(o(),u(g,{key:2,onClick:v=>Gt(l)},{prepend:s(()=>[n(m,{icon:p(M),size:"18"},null,8,["icon"])]),default:s(()=>[n(k,null,{default:s(()=>e[26]||(e[26]=[h("Editar")])),_:1})]),_:2},1032,["onClick"])):r("",!0),_.value?(o(),u(z,{key:3,class:"my-1"})):r("",!0),_.value?(o(),u(g,{key:4,onClick:v=>Ft(l)},{prepend:s(()=>[n(m,{icon:l.status==="active"?p(O):p(P),size:"18"},null,8,["icon"])]),default:s(()=>[n(k,null,{default:s(()=>[h(d(l.status==="active"?"Desactivar":"Activar"),1)]),_:2},1024)]),_:2},1032,["onClick"])):r("",!0)]),_:2},1024)]),_:2},1024)):r("",!0)])],14,De))),128)),Y.value.length===0?(o(),a("tr",He,e[28]||(e[28]=[t("td",{colspan:"6",class:"text-center text-medium-emphasis"},"No hay empresas relacionadas.",-1)]))):r("",!0)])]),_:1})]),_:1})]),_:1})):r("",!0),V.value?(o(),u($,{key:1},{default:s(()=>[n(x,{cols:"12"},{default:s(()=>e[31]||(e[31]=[t("div",{style:{height:"32px"}},null,-1)])),_:1})]),_:1})):r("",!0),V.value?(o(),u($,{key:2},{default:s(()=>[n(x,{cols:"12"},{default:s(()=>[e[37]||(e[37]=t("div",{class:"font-weight-bold text-h6 mb-2",style:{"padding-left":"0.5rem"}},"Ubicaciones",-1)),n(D,{class:"rounded-lg elevation-1 fixed-table"},{default:s(()=>[e[36]||(e[36]=t("thead",null,[t("tr",null,[t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"10%"}},"Folio"),t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"10%"}},"Logo"),t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"20%"}},"Nombre"),t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"25%"}},"Dirección"),t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"15%"}}),t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"10%"}},"Estatus"),t("th",{class:"font-weight-bold text-subtitle-1 actions-header",style:{width:"10%"}})])],-1)),t("tbody",null,[(o(!0),a(w,null,J(tt.value,l=>(o(),a("tr",{key:l.id,class:R(["row-clickable",{"cursor-pointer":T.value}]),onClick:v=>T.value?ht(l):null,style:{cursor:"pointer"}},[t("td",qe,[T.value?(o(),u(c,{key:0,to:`/ubicaciones/${l.id}`,style:{"text-decoration":"underline",color:"#1976d2 !important"},onClick:e[1]||(e[1]=Q(()=>{},["stop"]))},{default:s(()=>[h(d(l.folio||"No disponible"),1)]),_:2},1032,["to"])):(o(),a("span",Je,d(l.folio||"No disponible"),1))]),t("td",Qe,[t("div",{class:R(["logo-avatar",l.logo?"logo-avatar-transparent":""])},[l.logo?(o(),a("img",{key:0,src:l.logo,alt:"Logo"},null,8,Ke)):(o(),a("span",We,"Sin logo"))],2)]),t("td",Xe,d(l.name||"No disponible"),1),t("td",Ye,d(l.address?gt(rt(l.address),60):"No disponible"),1),e[34]||(e[34]=t("td",null,null,-1)),t("td",tl,[l.status?(o(),u(q,{key:0,status:l.status},null,8,["status"])):(o(),a("span",el,"No disponible"))]),t("td",ll,[Vt.value?(o(),u(L,{key:0,location:"bottom end"},{activator:s(({props:v})=>[n(E,F({ref_for:!0},v,{variant:"text",class:"pa-0","min-width":"0",height:"24"}),{default:s(()=>[n(m,{icon:p(Z),size:"20"},null,8,["icon"])]),_:2},1040)]),default:s(()=>[n(j,{class:"custom-dropdown elevation-1 rounded-lg",style:{"min-width":"200px"}},{default:s(()=>[T.value?(o(),u(g,{key:0,onClick:v=>ht(l)},{prepend:s(()=>[n(m,{icon:p(K),size:"18"},null,8,["icon"])]),default:s(()=>[n(k,null,{default:s(()=>e[32]||(e[32]=[h("Ver")])),_:1})]),_:2},1032,["onClick"])):r("",!0),at.value&&T.value?(o(),u(z,{key:1,class:"my-1"})):r("",!0),at.value?(o(),u(g,{key:2,onClick:v=>It(l)},{prepend:s(()=>[n(m,{icon:p(M),size:"18"},null,8,["icon"])]),default:s(()=>[n(k,null,{default:s(()=>e[33]||(e[33]=[h("Editar")])),_:1})]),_:2},1032,["onClick"])):r("",!0),_.value?(o(),u(z,{key:3,class:"my-1"})):r("",!0),_.value?(o(),u(g,{key:4,onClick:v=>Rt(l)},{prepend:s(()=>[n(m,{icon:l.status==="active"?p(O):p(P),size:"18"},null,8,["icon"])]),default:s(()=>[n(k,null,{default:s(()=>[h(d(l.status==="active"?"Desactivar":"Activar"),1)]),_:2},1024)]),_:2},1032,["onClick"])):r("",!0)]),_:2},1024)]),_:2},1024)):r("",!0)])],10,Ze))),128)),tt.value.length===0?(o(),a("tr",sl,e[35]||(e[35]=[t("td",{colspan:"6",class:"text-center text-medium-emphasis"},"No hay ubicaciones relacionadas.",-1)]))):r("",!0)])]),_:1})]),_:1})]),_:1})):r("",!0),V.value?(o(),u($,{key:3},{default:s(()=>[n(x,{cols:"12"},{default:s(()=>e[38]||(e[38]=[t("div",{style:{height:"32px"}},null,-1)])),_:1})]),_:1})):r("",!0),V.value?(o(),u($,{key:4},{default:s(()=>[n(x,{cols:"12"},{default:s(()=>[e[43]||(e[43]=t("div",{class:"font-weight-bold text-h6 mb-2",style:{"padding-left":"0.5rem"}},"Grupos de Ubicaciones",-1)),n(D,{class:"rounded-lg elevation-1 fixed-table"},{default:s(()=>[e[42]||(e[42]=t("thead",null,[t("tr",null,[t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"10%"}},"ID"),t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"10%"}},"Nombre"),t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"20%"}}),t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"25%"}},"Ubicaciones"),t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"15%"}}),t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"10%"}},"Estatus"),t("th",{class:"font-weight-bold text-subtitle-1 actions-header",style:{width:"10%"}})])],-1)),t("tbody",null,[(o(!0),a(w,null,J(et.value,l=>(o(),a("tr",{key:l.id,class:R(["row-clickable",{"cursor-pointer":S.value}]),onClick:v=>S.value?bt(l):void 0,style:ct({cursor:S.value?"pointer":"default"})},[t("td",null,[S.value?(o(),u(c,{key:0,to:`/grupos-ubicaciones/${l.id}`,style:{"text-decoration":"underline",color:"#1976d2 !important"},onClick:e[2]||(e[2]=Q(()=>{},["stop"]))},{default:s(()=>[h(d(l.id),1)]),_:2},1032,["to"])):(o(),a("span",nl,d(l.id),1))]),t("td",null,d(l.name||"No disponible"),1),t("td",null,d(Pt(l)),1),t("td",null,[l.status?(o(),u(q,{key:0,status:l.status},null,8,["status"])):(o(),a("span",il,"No disponible"))]),t("td",al,[Et.value?(o(),u(L,{key:0,location:"bottom end"},{activator:s(({props:v})=>[n(E,F({ref_for:!0},v,{variant:"text",class:"pa-0","min-width":"0",height:"24"}),{default:s(()=>[n(m,{icon:p(Z),size:"20"},null,8,["icon"])]),_:2},1040)]),default:s(()=>[n(j,{class:"custom-dropdown elevation-1 rounded-lg",style:{"min-width":"200px"}},{default:s(()=>[S.value?(o(),u(g,{key:0,onClick:v=>bt(l)},{prepend:s(()=>[n(m,{icon:p(K),size:"18"},null,8,["icon"])]),default:s(()=>[n(k,null,{default:s(()=>e[39]||(e[39]=[h("Ver")])),_:1})]),_:2},1032,["onClick"])):r("",!0),ut.value&&S.value?(o(),u(z,{key:1,class:"my-1"})):r("",!0),ut.value?(o(),u(g,{key:2,onClick:v=>Lt(l)},{prepend:s(()=>[n(m,{icon:p(M),size:"18"},null,8,["icon"])]),default:s(()=>[n(k,null,{default:s(()=>e[40]||(e[40]=[h("Editar")])),_:1})]),_:2},1032,["onClick"])):r("",!0),_.value?(o(),u(z,{key:3,class:"my-1"})):r("",!0),_.value?(o(),u(g,{key:4,onClick:v=>Mt(l)},{prepend:s(()=>[n(m,{icon:l.status==="active"?p(O):p(P),size:"18"},null,8,["icon"])]),default:s(()=>[n(k,null,{default:s(()=>[h(d(l.status==="active"?"Desactivar":"Activar"),1)]),_:2},1024)]),_:2},1032,["onClick"])):r("",!0)]),_:2},1024)]),_:2},1024)):r("",!0)])],14,ol))),128)),et.value.length===0?(o(),a("tr",ul,e[41]||(e[41]=[t("td",{colspan:"5",class:"text-center text-medium-emphasis"},"No hay grupos de ubicaciones relacionados.",-1)]))):r("",!0)])]),_:1})]),_:1})]),_:1})):r("",!0),V.value?(o(),u($,{key:5},{default:s(()=>[n(x,{cols:"12"},{default:s(()=>e[44]||(e[44]=[t("div",{style:{height:"32px"}},null,-1)])),_:1})]),_:1})):r("",!0),V.value?(o(),u($,{key:6},{default:s(()=>[n(x,{cols:"12"},{default:s(()=>[e[49]||(e[49]=t("div",{class:"font-weight-bold text-h6 mb-2",style:{"padding-left":"0.5rem"}},"Usuarios",-1)),n(D,{class:"rounded-lg elevation-1 fixed-table"},{default:s(()=>[e[48]||(e[48]=t("thead",null,[t("tr",null,[t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"10%"}},"ID"),t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"10%"}},"Foto"),t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"20%"}},"Nombre"),t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"25%"}},"Correo"),t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"15%"}},"Rol"),t("th",{class:"font-weight-bold text-subtitle-1",style:{width:"10%"}},"Estatus"),t("th",{class:"font-weight-bold text-subtitle-1 actions-header",style:{width:"10%"}})])],-1)),t("tbody",null,[(o(!0),a(w,null,J(lt.value,l=>(o(),a("tr",{key:l.id,class:R(["row-clickable",{"cursor-pointer":U.value}]),onClick:v=>U.value?mt(l):void 0,style:ct({cursor:U.value?"pointer":"default"})},[t("td",null,[U.value?(o(),u(c,{key:0,to:`/usuarios/${l.id}`,style:{"text-decoration":"underline",color:"#1976d2 !important"},onClick:e[3]||(e[3]=Q(()=>{},["stop"]))},{default:s(()=>[h(d(l.id),1)]),_:2},1032,["to"])):(o(),a("span",rl,d(l.id),1))]),t("td",cl,[t("div",pl,[l.profile_picture?(o(),a("img",{key:0,src:l.profile_picture,alt:"Foto de perfil",style:{width:"32px",height:"32px","border-radius":"50%","object-fit":"cover",background:"#f5f5f5"}},null,8,vl)):(o(),a("span",fl,"Sin foto"))])]),t("td",null,[t("span",null,d(l.name||[l.first_name,l.last_name].filter(Boolean).join(" ")||"No disponible"),1)]),t("td",null,d(l.email||"No disponible"),1),t("td",null,d(Array.isArray(l.roles)&&l.roles.length?typeof l.roles[0]=="object"?l.roles[0].name==="superadmin"?"Super Administrador":l.roles[0].name==="admin"?"Administrador":l.roles[0].name==="sponsor"?"Sponsor":l.roles[0].name||"No disponible":l.roles[0]==="superadmin"?"Super Administrador":l.roles[0]==="admin"?"Administrador":l.roles[0]==="sponsor"?"Sponsor":l.roles[0]||"No disponible":"No disponible"),1),t("td",null,[l.status?(o(),u(q,{key:0,status:l.status},null,8,["status"])):(o(),a("span",yl,"No disponible"))]),t("td",hl,[Dt.value?(o(),u(L,{key:0,location:"bottom end"},{activator:s(({props:v})=>[n(E,F({ref_for:!0},v,{variant:"text",class:"pa-0","min-width":"0",height:"24"}),{default:s(()=>[n(m,{icon:p(Z),size:"20"},null,8,["icon"])]),_:2},1040)]),default:s(()=>[n(j,{class:"custom-dropdown elevation-1 rounded-lg",style:{"min-width":"200px"}},{default:s(()=>[U.value?(o(),u(g,{key:0,onClick:v=>mt(l)},{prepend:s(()=>[n(m,{icon:p(K),size:"18"},null,8,["icon"])]),default:s(()=>[n(k,null,{default:s(()=>e[45]||(e[45]=[h("Ver")])),_:1})]),_:2},1032,["onClick"])):r("",!0),dt.value&&U.value?(o(),u(z,{key:1,class:"my-1"})):r("",!0),dt.value?(o(),u(g,{key:2,onClick:v=>jt(l)},{prepend:s(()=>[n(m,{icon:p(M),size:"18"},null,8,["icon"])]),default:s(()=>[n(k,null,{default:s(()=>e[46]||(e[46]=[h("Editar")])),_:1})]),_:2},1032,["onClick"])):r("",!0),_.value?(o(),u(z,{key:3,class:"my-1"})):r("",!0),_.value?(o(),u(g,{key:4,onClick:v=>Ot(l)},{prepend:s(()=>[n(m,{icon:l.status==="active"?p(O):p(P),size:"18"},null,8,["icon"])]),default:s(()=>[n(k,null,{default:s(()=>[h(d(l.status==="active"?"Desactivar":"Activar"),1)]),_:2},1024)]),_:2},1032,["onClick"])):r("",!0)]),_:2},1024)]),_:2},1024)):r("",!0)])],14,dl))),128)),lt.value.length===0?(o(),a("tr",bl,e[47]||(e[47]=[t("td",{colspan:"7",class:"text-center text-medium-emphasis"},"No hay usuarios relacionados.",-1)]))):r("",!0)])]),_:1})]),_:1})]),_:1})):r("",!0)]),_:1})):(o(),a("div",ml,[n(ee,{type:"error",class:"mt-10",variant:"outlined",density:"comfortable"},{default:s(()=>e[50]||(e[50]=[h(" No tienes acceso a esta organización. ")])),_:1})]))}}},Nl=Ht(_l,[["__scopeId","data-v-6a31a805"]]);export{Nl as default};
