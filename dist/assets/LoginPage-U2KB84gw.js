import{_ as A}from"./tasker-logo-BjoI8oNu.js";import{z as T,A as z,ak as B,J as r,c as y,aj as O,a2 as R,w as n,a as l,d as t,U as b,C as x,q as S,e as _,b1 as U,f as q,a0 as E,o as V,_ as w,ab as F,a8 as N}from"./index-DA8Oyi7H.js";import{b as P,I as $}from"./mdi-CCqP_oQm.js";const M={class:"d-flex justify-space-between align-center mt-4 mb-7"},J=T({__name:"AuthLogin",setup(k){const v=P,a=$,g=E(),u=z(),C=B(),c=r(!1),m=r(""),p=r(""),i=r(!1),f=r(!1),h=[o=>!!o||"El correo es obligatorio",o=>/.+@.+\..+/.test(o)||"Correo no válido"],I=[o=>!!o||"La contraseña es obligatoria"],L=async()=>{var o,e;try{c.value=!0,await u.login(m.value,p.value,f.value);const s=(((o=u.user)==null?void 0:o.roles)||[]).includes("admin"),j=!!((e=u.user)!=null&&e.organization_id);s&&!j?g.push("/organizaciones/crear"):g.push("/dashboard")}catch(d){C.error("Credenciales inválidas"),console.error("Login error:",d)}finally{c.value=!1}};return(o,e)=>{const d=S("router-link");return V(),y(O,{class:"loginForm mt-3",onSubmit:R(L,["prevent"])},{default:n(()=>[l(b,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=s=>m.value=s),rules:h,label:"Correo",placeholder:"ejemplo@dominio.com",required:"",variant:"outlined",color:"primary",class:"mb-4",autocomplete:"username"},null,8,["modelValue"]),l(b,{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=s=>p.value=s),rules:I,label:"Contraseña",placeholder:"*******",type:i.value?"text":"password",required:"",variant:"outlined",color:"primary",class:"mb-4",autocomplete:"current-password","append-inner-icon":i.value?x(v):x(a),"onClick:appendInner":e[2]||(e[2]=s=>i.value=!i.value)},null,8,["modelValue","type","append-inner-icon"]),t("div",M,[l(d,{to:"/forgot_password",class:"text-darkText link-hover"},{default:n(()=>e[4]||(e[4]=[_(" ¿Olvidaste tu contraseña? ")])),_:1}),l(U,{modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=s=>f.value=s),label:"Recuérdame",density:"compact","hide-details":"",class:"ma-0 pa-0"},null,8,["modelValue"])]),l(q,{color:"primary",block:"",variant:"flat",size:"large",type:"submit",loading:c.value},{default:n(()=>e[5]||(e[5]=[_(" Iniciar Sesión ")])),_:1},8,["loading"])]),_:1})}}}),D=w(J,[["__scopeId","data-v-452d553c"]]),G={class:"right-panel d-flex align-center justify-center"},H={__name:"LoginPage",setup(k){return(v,a)=>(V(),y(N,{fluid:"",class:"login-container d-flex pa-0",style:{height:"100vh"}},{default:n(()=>[a[3]||(a[3]=t("div",{class:"left-panel"},null,-1)),t("div",G,[l(F,{elevation:"0",class:"pa-8 d-flex flex-column justify-center login-card",style:{width:"600px","min-height":"500px"}},{default:n(()=>[a[0]||(a[0]=t("div",{class:"text-center mb-6"},[t("img",{src:A,alt:"Tasker logo",class:"tasker-logo"})],-1)),a[1]||(a[1]=t("h3",{class:"h4 text-center font-weight-bold mb-4"},"Iniciar Sesión",-1)),a[2]||(a[2]=t("p",{class:"text-subtitle-3 text-center mb-8"},"Ingresa tus credenciales para acceder a tu cuenta",-1)),l(D)]),_:1})])]),_:1}))}},X=w(H,[["__scopeId","data-v-9fcd8204"]]);export{X as default};
