import{_ as R,ak as I,J as n,K as q,aC as E,s as B,d as l,a as t,w as u,C as r,aj as L,a2 as N,U as w,f as g,e as x,a0 as P,al as T,ab as S,o as U,L as $}from"./index-DA8Oyi7H.js";import{b as y,I as V,j}from"./mdi-CCqP_oQm.js";import{_ as F}from"./tasker-logo-BjoI8oNu.js";const M={class:"forgot-password-page"},A={class:"card-wrapper"},D={class:"text-center mb-6"},J=["src"],K={__name:"ResetPassword",setup(O){const m=E(),f=P(),v=I(),c=n(!1),b=n(null),i=n(!1),d=n(!1),s=n({token:"",email:"",password:"",password_confirmation:""});q(()=>{s.value.token=m.query.token||"",s.value.email=m.query.email||""});const p={required:a=>!!a||"Este campo es obligatorio.",min:a=>a.length>=8||"Debe tener al menos 8 caracteres."},C=a=>a===s.value.password||"Las contraseñas no coinciden",_=async()=>{var a,e;if(b.value.validate()){c.value=!0;try{await $.post("/reset-password",s.value),v.success("Contraseña restablecida con éxito."),f.push("/login")}catch(o){const k=((e=(a=o.response)==null?void 0:a.data)==null?void 0:e.message)||"Error al restablecer contraseña.";v.error(k)}finally{c.value=!1}}};return(a,e)=>(U(),B("div",M,[l("div",A,[t(S,{class:"pa-10 login-card",elevation:"6","max-width":"420"},{default:u(()=>[l("div",D,[l("img",{src:r(F),alt:"Tasker Logo",class:"logo-large mb-4"},null,8,J)]),e[7]||(e[7]=l("h2",{class:"text-center text-h5 font-weight-bold mb-4"},"Restablecer Contraseña",-1)),e[8]||(e[8]=l("p",{class:"text-center text-body-2 mb-8"},"Ingresa tu nueva contraseña y confírmala para restablecer el acceso a tu cuenta.",-1)),t(L,{onSubmit:N(_,["prevent"]),ref_key:"formRef",ref:b,class:"mb-6"},{default:u(()=>[t(w,{modelValue:s.value.password,"onUpdate:modelValue":e[0]||(e[0]=o=>s.value.password=o),label:"Nueva Contraseña",type:i.value?"text":"password","append-inner-icon":i.value?r(y):r(V),"onClick:appendInner":e[1]||(e[1]=o=>i.value=!i.value),rules:[p.required,p.min],variant:"outlined",class:"mb-4",required:""},null,8,["modelValue","type","append-inner-icon","rules"]),t(w,{modelValue:s.value.password_confirmation,"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.password_confirmation=o),label:"Confirmar Contraseña",type:d.value?"text":"password","append-inner-icon":d.value?r(y):r(V),"onClick:appendInner":e[3]||(e[3]=o=>d.value=!d.value),rules:[p.required,C],variant:"outlined",class:"mb-4",required:""},null,8,["modelValue","type","append-inner-icon","rules"]),t(g,{type:"submit",color:"primary",class:"mt-4",block:"",loading:c.value},{default:u(()=>e[5]||(e[5]=[x(" Restablecer Contraseña ")])),_:1},8,["loading"])]),_:1},512),t(g,{class:"mt-6",variant:"text",color:"secondary",block:"",onClick:e[4]||(e[4]=o=>r(f).push("/login"))},{default:u(()=>[t(T,{icon:r(j),start:""},null,8,["icon"]),e[6]||(e[6]=x(" Volver a Iniciar Sesión "))]),_:1})]),_:1})])]))}},H=R(K,[["__scopeId","data-v-b9c7d81f"]]);export{H as default};
